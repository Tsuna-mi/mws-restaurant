const version="1.0.4",staticCacheName="msw-restrev-",staticCache="msw-restrev-1.0.4",staticCacheUrls=["/","/js/dbhelper.js","/js/main.js","/js/restaurant_info.js","/js/registerSW.js","/index.html","/restaurant.html","/assets/data/restaurants.json","/manifest.json","/assets/css/styles.css","https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css","https://fonts.googleapis.com/css?family=Roboto:300,400,500,700","https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxKKTU1Kg.woff2","https://fonts.gstatic.com/s/roboto/v18/KFOlCnqEu92Fr1MmSU5fBBc4AMP6lQ.woff2","/assets/img/1.jpg","/assets/img/2.jpg","/assets/img/3.jpg","/assets/img/4.jpg","/assets/img/5.jpg","/assets/img/6.jpg","/assets/img/7.jpg","/assets/img/8.jpg","/assets/img/9.jpg","/assets/img/10.jpg","/assets/img/restaurant-icon.svg"];function servePhoto(s){const e=s.url.replace(/-(s|m|l|xl|m@2x|s@2x)\.(jpg|webp|png|svg)$/,"");return caches.open(staticCache).then(t=>t.match(e).then(a=>a||fetch(s).then(s=>(t.put(e,s.clone()),s)).catch(()=>console.log("Fetch Images fail",s.url))))}self.addEventListener("install",s=>{s.waitUntil(caches.open(staticCache).then(s=>s.addAll(staticCacheUrls)).catch(s=>console.log("Error addingAll to cache, ",s)))}),self.addEventListener("activate",s=>{console.log("Activating new service worker...");const e=[staticCache];s.waitUntil(caches.keys().then(s=>{Promise.all(s.map(s=>(-1===e.indexOf(s)&&caches.delete(s),caches)))}))}),self.addEventListener("fetch",s=>{console.log("Fetch event for ",s.request.url);const e=new URL(s.request.url);if(e.origin===location.origin&&e.pathname.startsWith("/assets/img/"))return console.log("Adding a new image to cache, ",s.request),void s.respondWith(servePhoto(s.request));s.respondWith(caches.match(s.request).then(e=>e||fetch(s.request)).catch(s=>console.log("Error in cache.match, ",s)))}),self.addEventListener("message",s=>{"skipWaiting"===s.data.action&&self.skipWaiting()});
//# sourceMappingURL=maps/sw.js.map
